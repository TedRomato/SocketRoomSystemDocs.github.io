<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: roomSystem.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: roomSystem.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const  {Room} = require('./room.js')
const {Status} = require('./status.js')


/**
 * RoomSystem class, manages multiple rooms, and passes incoming data to correct room. 
 */

class RoomSystem{
    /**
     * Create new RoomSystem instance.
     * @param {Function} appConstructor - App constructor. Keep in mind, custom app must implement onConnect, and recieveData methods.
     */
    constructor(appConstructor){
        /**
         * @property {Array&lt;Room>} rooms - Array of all [rooms]{@link Room} in a [room system]{@link RoomSystem}.
         */
        this.rooms = []
        /**
         * @property {Function} appConstructor - App constructor. Should implement onConnect, and recieveData methods.
         */
        this.appConstructor = appConstructor
    }
    /**
     * Creates and adds a new [room]{@link Room} to this [room system]{@link RoomSystem}. Makes a socket that made, the request a [room leader]{@link Room#roomLeader}. 
     * @param {Object} socket - Founding socket.io socket. 
     * @param {number} maxMembers - Maximum room size. 
     * @returns {Status} Status message, with {string} created room id as a data.
     */
    createRoom(socket, maxMembers = 2) {
        const room = new Room(socket, this.appConstructor(), maxMembers,() => {console.log("Room is empty")}, ()=> {console.log("Leader left")})
        this.rooms.push(room)
        return new Status("room_created", room.id)
    }
    /**
     * Finds and returns [room]{@link Room} with matching [room id]{@link Room#id} or null if it doesn't exist'.
     * @param {srting} roomId 
     * @returns {Room|null} 
     */
    getRoom(roomId) {
        for(const room of this.rooms) {
            if(room.id === roomId) return room
        }
        return null
    }
    /**
     * Not implemented.
     */
    leaveRoom() {
        //const room = this.getRoom(roomId)
        //if(!room) return noRoomWithThisIdEmit(socket, roomId)
        //room.disconnect(socket)
    }

}


module.exports = {RoomSystem};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Room.html">Room</a></li><li><a href="RoomSystem.html">RoomSystem</a></li><li><a href="SocketRoomSystem.html">SocketRoomSystem</a></li><li><a href="Status.html">Status</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sat Oct 30 2021 13:49:37 GMT+0200 (Středoevropský letní čas)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
